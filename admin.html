<!DOCTYPE html>
<html>
<head>
    <title>Hardrock Media Admin</title>
</head>
<body>
<h2>Upload Image</h2>
<input type="file" id="fileInput"/>
<button onclick="uploadFiles()">Upload</button>

<div id="preview"></div>

<script>
    const cloudName = "djoqjaxba";   // from Cloudinary Dashboard
    const uploadPreset = "unsigned_upload"; // your preset name

    async function uploadFiles() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) {
        alert("Please select a file first.");
        return;
      }

      const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;

      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", uploadPreset);

      try {
        const res = await fetch(url, {
          method: "POST",
          body: formData
        });

        const data = await res.json();
        console.log("Uploaded:", data);

        // Save URL in localStorage (or your DB)
        let images = JSON.parse(localStorage.getItem("uploadedImages") || "[]");
        images.push(data.secure_url);
        localStorage.setItem("uploadedImages", JSON.stringify(images));

        // Show preview
        showUploadedImages();

      } catch (err) {
        console.error("Upload failed", err);
      }
    }

    // Display all uploaded images
    function showUploadedImages() {
      const images = JSON.parse(localStorage.getItem("uploadedImages") || "[]");
      const previewDiv = document.getElementById("preview");
      previewDiv.innerHTML = images.map(url => `<img src="${url}" width="200" style="margin:5px"/>`).join('');
    }

    // Initial load
    showUploadedImages();
</script>

</body>
</html>
